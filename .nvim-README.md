# Neovim Configuration for GEEST Project

This directory contains local Neovim configuration that automatically sets up Python LSP with QGIS library support.

## Quick Setup

1. Enter the nix development environment:
   ```bash
   nix develop
   ```

2. Source the nvim setup script:
   ```bash
   source .nvim-setup.sh
   ```

3. Start editing Python files:
   ```bash
   vim your_file.py  # vim is aliased to nvim
   ```

## Features

- **vim â†’ nvim alias**: Type `vim` and it will launch `nvim`
- **Python LSP**: Pyright LSP configured for Python development
- **QGIS Libraries**: Full QGIS Python API available for autocompletion
- **GitHub Copilot**: AI code suggestions with inline ghost text
- **Claude Chat**: Direct Claude AI integration for coding assistance
- **Project-local**: Configuration only applies in this directory

## Key Bindings

### LSP
- `gd` - Go to definition
- `K` - Show hover documentation
- `gi` - Go to implementation
- `<C-k>` - Show signature help
- `<space>rn` - Rename symbol
- `<space>ca` - Code actions
- `gr` - Find references
- `<space>f` - Format code

### GitHub Copilot
- `<Alt-l>` - Accept suggestion
- `<Alt-]>` - Next suggestion
- `<Alt-[>` - Previous suggestion
- `<C-]>` - Dismiss suggestion

### Claude Chat
- `<leader>cc` - Open Claude chat
- `<leader>cr` - Reset chat session
- `<leader>cx` - Close chat window

## Requirements

### Essential
- Neovim with LSP support
- Required plugins (see Plugin Installation below)
- Python environment set up by the nix flake

### Optional Features
- **GitHub Copilot**: Node.js + GitHub Copilot subscription
- **Claude Chat**: Anthropic API key

## Plugin Installation

Add these to your Neovim plugin manager:

```vim
" Essential plugins
Plug 'neovim/nvim-lspconfig'
Plug 'hrsh7th/nvim-cmp'
Plug 'hrsh7th/cmp-nvim-lsp'

" GitHub Copilot (optional)
Plug 'github/copilot.vim'

" Claude Chat (optional)
Plug 'pasky/claude.nvim'
```

### Setup Steps

1. **GitHub Copilot** (optional):
   - Ensure Node.js is installed
   - Run `:Copilot setup` after installation
   - Authenticate with your GitHub account

2. **Claude Chat** (optional):
   - Set environment variable: `export ANTHROPIC_API_KEY=your_api_key`
   - Add to your shell profile to persist

## Files Created

- `.nvimrc` - Local nvim configuration (auto-loaded)
- `.nvim-setup.sh` - Environment setup script
- `.nvim-README.md` - This documentation

## Troubleshooting

If QGIS libraries aren't available:
1. Ensure you ran `nix develop` first
2. Source the setup script: `source .nvim-setup.sh`
3. Check that PYTHONPATH includes QGIS: `echo $PYTHONPATH`

The configuration will print a message when loaded successfully.
